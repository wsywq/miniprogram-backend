# 微信小程序 - 习惯打卡系统需求文档

## 1. 项目概述

### 1.1 项目背景
开发一款微信小程序，帮助用户养成良好习惯，通过每日打卡的方式记录习惯执行情况，并通过积分奖励机制激励用户坚持。

### 1.2 项目目标
- 帮助用户建立和维持良好习惯
- 提供简洁易用的打卡界面
- 通过奖励机制提高用户粘性
- 数据可视化展示用户习惯完成情况

## 2. 功能需求

### 2.1 用户管理
- **用户注册/登录**：通过微信授权登录
- **用户信息**：头像、昵称、积分余额
- **用户设置**：通知提醒设置、隐私设置

### 2.2 习惯管理
- **创建习惯**
  - 习惯名称（必填）
  - 习惯描述（可选）
  - 习惯图标选择
  - 目标频率设置（每日/每周/自定义）
  - 提醒时间设置
  - 习惯分类（健康、学习、工作、生活等）

- **编辑习惯**
  - 修改习惯信息
  - 暂停/恢复习惯
  - 删除习惯

- **习惯列表**
  - 显示所有活跃习惯
  - 习惯状态标识（今日已完成/未完成）
  - 连续打卡天数显示

### 2.3 打卡功能
- **每日打卡**
  - 一键打卡按钮
  - 打卡时间记录
  - 打卡备注（可选）
  - 打卡照片上传（可选）

- **打卡状态**
  - 今日打卡状态显示
  - 连续打卡天数统计
  - 本月完成率统计

- **补卡功能**
  - 允许补前一天的卡（限制条件）
  - 补卡需要消耗积分

### 2.4 积分奖励系统
- **积分获取规则**
  - 每日打卡：+10积分
  - 连续7天：+50积分奖励
  - 连续30天：+200积分奖励
  - 月度完成率100%：+300积分奖励

- **积分消费**
  - 补卡功能：-20积分
  - 虚拟奖励兑换
  - 个性化主题解锁

- **奖励商城**
  - 虚拟徽章收集
  - 个性化头像框
  - 小程序主题皮肤
  - 特殊称号获得

### 2.5 数据统计
- **个人统计**
  - 总打卡天数
  - 当前连续打卡天数
  - 历史最长连续天数
  - 月度/年度完成率

- **习惯分析**
  - 每个习惯的完成情况
  - 习惯完成趋势图
  - 最佳打卡时间分析

- **日历视图**
  - 月历显示打卡情况
  - 不同颜色标识完成状态
  - 点击查看具体日期详情

### 2.6 社交功能（可选）
- **好友系统**
  - 添加好友
  - 查看好友打卡情况
  - 相互鼓励点赞

- **排行榜**
  - 好友积分排行
  - 连续打卡天数排行

## 3. 非功能需求

### 3.1 性能要求
- 页面加载时间 < 2秒
- 打卡操作响应时间 < 1秒
- 支持离线打卡，网络恢复后同步

### 3.2 用户体验
- 界面简洁美观，符合微信设计规范
- 操作流程简单直观
- 支持暗黑模式
- 适配不同屏幕尺寸

### 3.3 数据安全
- 用户数据加密存储
- 定期数据备份
- 隐私信息保护

### 3.4 兼容性
- 支持微信版本 7.0+
- 兼容iOS和Android系统
- 适配主流手机分辨率

## 4. 页面结构

### 4.1 主要页面
1. **首页**：习惯列表 + 快速打卡
2. **打卡页**：打卡详情 + 历史记录
3. **统计页**：数据分析 + 图表展示
4. **奖励页**：积分商城 + 奖励兑换
5. **我的页**：个人信息 + 设置

### 4.2 弹窗/组件
- 创建/编辑习惯弹窗
- 打卡成功提示
- 积分获得动画
- 日历选择器
- 图片上传组件

## 5. 数据模型

### 5.1 用户表 (users)
- user_id: 用户ID
- openid: 微信openid
- nickname: 昵称
- avatar: 头像
- points: 积分
- created_at: 创建时间
- updated_at: 更新时间

### 5.2 习惯表 (habits)
- habit_id: 习惯ID
- user_id: 用户ID
- name: 习惯名称
- description: 描述
- icon: 图标
- category: 分类
- frequency: 频率
- reminder_time: 提醒时间
- status: 状态（活跃/暂停）
- created_at: 创建时间

### 5.3 打卡记录表 (check_ins)
- checkin_id: 打卡ID
- habit_id: 习惯ID
- user_id: 用户ID
- checkin_date: 打卡日期
- checkin_time: 打卡时间
- note: 备注
- image: 图片
- is_makeup: 是否补卡

### 5.4 积分记录表 (point_records)
- record_id: 记录ID
- user_id: 用户ID
- points: 积分变化
- type: 类型（获得/消费）
- reason: 原因
- created_at: 创建时间

## 6. 技术约束

### 6.1 微信小程序限制
- 代码包大小限制 2MB
- 本地存储限制 10MB
- 网络请求域名需备案
- 需要通过微信审核

### 6.2 开发要求
- 使用微信小程序原生开发或uni-app
- 后端API需要HTTPS
- 数据库建议使用MySQL或MongoDB
- 需要实现微信登录授权

## 7. 项目里程碑

### 7.1 第一阶段（MVP）
- 用户登录注册
- 基础习惯管理
- 简单打卡功能
- 基础积分系统

### 7.2 第二阶段
- 数据统计分析
- 奖励商城
- 界面优化
- 性能优化

### 7.3 第三阶段
- 社交功能
- 高级统计
- 个性化推荐
- 运营活动支持
